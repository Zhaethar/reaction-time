<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>ClickHero</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      text-align: center;
    }
    #start {
      margin: 30px;
      padding: 12px 24px;
      background: #4CAF50;
      color: white;
      font-weight: bold;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      justify-content: center;
      margin: 20px auto;
    }
    .cell {
      position: relative;
      width: 60px;
      height: 60px;
    }
    .box {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      font-weight: bold;
      border-radius: 10px;
      background: #8eca67;
      color: #333;
      user-select: none;
      cursor: pointer;
    }
    .upper {
      z-index: 2;
    }
    .lower {
      z-index: 1;
    }
    #timer, .stats {
      font-size: 16px;
      margin-top: 10px;
    }
    .share-btn {
      margin-top: 10px;
      background: #3b5998;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    footer {
      margin-top: 40px;
      padding: 20px;
      font-size: 14px;
      background: #f1f1f1;
      color: #666;
    }
    footer a {
      color: #666;
      text-decoration: none;
      margin: 0 8px;
    }
    footer a.blue {
      color: #0078D4;
      font-weight: bold;
    }
    footer a:hover {
      text-decoration: underline;
    }

    /* 팝업 스타일 */
    #popup {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 999;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .popup-box {
      background: #fff;
      padding: 30px 20px;
      border-radius: 12px;
      max-width: 500px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      text-align: left;
      font-size: 16px;
      line-height: 1.6;
    }
    .popup-box h2 {
      margin-top: 0;
      color: #4CAF50;
    }
    .popup-box button {
      margin-top: 20px;
      background: #4CAF50;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- 설명 팝업 -->
  <div id="popup">
    <div class="popup-box">
      <h2>📘 ClickHero란?</h2>
      <p>1부터 50까지 숫자를 <strong>순서대로 클릭</strong>해 반응속도를 측정하는 게임입니다.</p>
      <ul>
        <li>숫자가 겹쳐 있으면 <strong>위쪽 숫자부터</strong> 클릭해 주세요.</li>
        <li>기록은 저장되며, 당신의 상위 퍼센트가 표시됩니다.</li>
      </ul>
      <p>광고는 사이트 운영 비용을 충당하기 위한 최소한의 수익입니다 🙏</p>
      <button onclick="closePopup()">확인했어요</button>
    </div>
  </div>

  <h1 id="start">게임 시작!</h1>
  <div id="timer">시간: <span id="time">0.00</span>초</div>
  <div id="game"></div>
  <div class="stats">
    🕓 최근 기록: <span id="recent">--</span><br>
    🥇 최고 기록: <span id="best">--</span><br>
    📊 당신은 상위 <span id="percent">--</span><br>
    <button class="share-btn" onclick="copyResult()">기록 공유하기</button>
  </div>

  <footer>
    © 2025 ClickHero |
    <a href="/about.html" class="blue">소개</a> |
    <a href="/contact.html" class="blue">이용약관</a> |
    <a href="/privacy.html">개인정보</a> |
    <a href="/tips.html">반응속도 팁</a> |
    <a href="/faq.html">FAQ</a>
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }

    let current = 1, startTime, interval;
    const game = $("#game"), siteURL = "https://clickhero.online";

    const percentMap = [
      { t: 2.0, rank: "상위 5%" },
      { t: 2.5, rank: "상위 10%" },
      { t: 3.0, rank: "상위 25%" },
      { t: 3.5, rank: "상위 40%" },
      { t: 4.0, rank: "상위 60%" },
      { t: 5.0, rank: "상위 80%" },
      { t: 999, rank: "하위 20%" }
    ];

    function getPercent(t) {
      return percentMap.find(x => t <= x.t)?.rank || "--";
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function updateTimer() {
      const t = ((Date.now() - startTime)/1000).toFixed(2);
      $("#time").text(t);
    }

    function startGame() {
      current = 1;
      game.empty();

      const top = shuffle(Array.from({length:25}, (_,i)=>i+1));
      const bottom = shuffle(Array.from({length:25}, (_,i)=>i+26));

      for (let i = 0; i < 25; i++) {
        const cell = $("<div>").addClass("cell");
        const lower = $("<div>").addClass("box lower").text(bottom[i]);
        const upper = $("<div>").addClass("box upper").text(top[i]);
        cell.append(lower).append(upper);
        game.append(cell);
      }

      startTime = Date.now();
      clearInterval(interval);
      interval = setInterval(updateTimer, 50);
    }

    $(document).on("click", ".box", function(){
      const num = parseInt($(this).text());
      if (num === current) {
        $(this).remove();
        current++;
        if (current > 50) {
          clearInterval(interval);
          const t = ((Date.now() - startTime)/1000).toFixed(2);
          saveScore(parseFloat(t));
        }
      }
    });

    function saveScore(time) {
      alert(`🎉 완료! 기록: ${time}초`);
      const best = parseFloat(localStorage.getItem("bestScore"));
      if (!best || time < best) localStorage.setItem("bestScore", time);

      let recent = JSON.parse(localStorage.getItem("recentScores") || "[]");
      recent.unshift(time);
      if (recent.length > 3) recent = recent.slice(0,3);
      localStorage.setItem("recentScores", JSON.stringify(recent));
      renderInfo();
    }

    function renderInfo() {
      const best = localStorage.getItem("bestScore");
      const recent = JSON.parse(localStorage.getItem("recentScores") || "[]");
      $("#best").text(best || "--");
      $("#recent").text(recent[0] || "--");
      $("#percent").text(recent[0] ? getPercent(parseFloat(recent[0])) : "--");
    }

    function copyResult() {
      const recent = JSON.parse(localStorage.getItem("recentScores") || "[]");
      if (!recent.length) return alert("공유할 기록이 없습니다.");
      const msg = `내 반응속도 기록:  ${recent[0]}초! 너도 해봐 👉 ${siteURL}`;
  navigator.clipboard.writeText(msg).then(() => alert("기록이 복사되었습니다!"));
}

  // 게임 시작 버튼 클릭 이벤트 연결
    $("#start").click(() => { startGame(); });
  </script>